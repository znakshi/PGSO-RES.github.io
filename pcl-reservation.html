<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make a Reservation - PGSO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .pgso-blue { background-color: #3c5473; }
        .pgso-btn { background-color: #3c5473; }
        .pgso-btn:hover { background-color: #2c3e50; }
        /* Custom style for form inputs to match screenshot gray */
        .form-input { background-color: #f3f4f6; border: none; }
        .form-input:focus { background-color: #ffffff; box-shadow: 0 0 0 2px #e5e7eb; }
        /* Calendar styles */
        .cal-cell { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }
        .cal-past { color: #d1d5db; cursor: not-allowed; }
        .cal-reserved { background-color: #e5e7eb; color: #9ca3af; text-decoration: line-through; cursor: not-allowed; }
        .cal-selected { background-color: #3c5473; color: white; font-weight: bold; }
        .cal-available:hover { background-color: #f3f4f6; cursor: pointer; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <nav class="bg-white border-b border-gray-200 py-4 px-6 flex justify-between items-center sticky top-0 z-50">
        <div class="flex items-center gap-3">
            <a href="index.html" class="text-3xl text-slate-600 no-underline">
                <i class="fa-regular fa-building"></i>
            </a>
            <div>
                <h1 class="text-xl font-semibold tracking-tight text-gray-800">PGSO-RES</h1>
                <p class="text-xs text-gray-500 font-light">PCL Hall</p>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8 max-w-5xl">
        <a href="index.html" class="inline-flex items-center text-sm font-medium text-gray-600 mb-6 hover:text-pgso-blue transition">
            <i class="fa-solid fa-arrow-left mr-2"></i> Back to Venues
        </a>

        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8">
            <h2 class="text-2xl font-bold mb-2">PCL Hall</h2>
            <p class="text-gray-500 mb-8">Fill out the form below to reserve your venue</p>

            <form id="reservation-form">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-bold mb-2">Full Name *</label>
                        <input type="text" class="form-input w-full rounded-md p-3" placeholder="">
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2">Contact Number *</label>
                        <input type="text" class="form-input w-full rounded-md p-3" placeholder="">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-bold mb-2">Email Address *</label>
                        <input type="email" class="form-input w-full rounded-md p-3" placeholder="e.g., juan@email.com">
                    </div>
                </div>

                <div class="mb-8">
                    <label class="block text-sm font-bold mb-2">Event Type</label>
                    <input type="text" class="form-input w-full rounded-md p-3" placeholder="e.g., Wedding, Conference, Birthday">
                </div>

                <h3 class="text-lg font-bold mb-2">Duration *</h3>
                <p class="text-gray-500 mb-2">Rental of Open Gym (6:00 am to 5:00 pm Only)</p>
                <div class="space-y-3 mb-2">
                    <div class="flex items-center">
                        <input id="duration-4" name="duration" type="radio" class="w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300" data-duration-value="4">
                        <label for="duration-4" class="ml-3 font-bold text-gray-800">4 hours and below (₱1,500)</label>
                    </div>
                    <div class="flex items-center">
                        <input id="duration-8" name="duration" type="radio" class="w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300" data-duration-value="8">
                        <label for="duration-8" class="ml-3 font-bold text-gray-800">8 hours (2,500)</label>
                    </div>

                <p class="text-s text-gray-500 mb-8">₱400 for every additional hour or a fraction thereof (if availed 4 hours only)</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div>
                        <label class="block text-sm font-bold mb-2">Start Time *</label>
                        <input type="time" class="form-input w-full rounded-md p-3 text-gray-500">
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2">End Time *</label>
                        <input type="time" class="form-input w-full rounded-md p-3 text-gray-500">
                    </div>
                </div>

                <div class="mb-8">
                     <label class="block text-sm font-bold mb-4">Select Date *</label>
                     <div class="border border-gray-100 rounded-xl p-6 max-w-md mx-auto">
                        <div class="flex justify-between items-center mb-6">
                            <button type="button" class="text-gray-800 hover:bg-gray-100 p-2 rounded-full"><i class="fa-solid fa-chevron-left"></i></button>
                            <h4 class="text-lg font-bold">November 2025</h4>
                            <button type="button" class="text-gray-800 hover:bg-gray-100 p-2 rounded-full"><i class="fa-solid fa-chevron-right"></i></button>
                        </div>
                        
                        <div class="grid grid-cols-7 gap-2 text-center mb-4 font-bold text-gray-800">
                            <div>Su</div><div>Mo</div><div>Tu</div><div>We</div><div>Th</div><div>Fr</div><div>Sa</div>
                        </div>
                        <div class="grid grid-cols-7 gap-2 justify-items-center text-gray-700">
                            <div class="cal-cell cal-past">26</div><div class="cal-cell cal-past">27</div><div class="cal-cell cal-past">28</div><div class="cal-cell cal-past">29</div><div class="cal-cell cal-past">30</div><div class="cal-cell cal-past">31</div><div class="cal-cell cal-available">1</div>
                            <div class="cal-cell cal-available">2</div><div class="cal-cell cal-available">3</div><div class="cal-cell cal-available">4</div><div class="cal-cell cal-available">5</div><div class="cal-cell cal-available">6</div><div class="cal-cell cal-available">7</div><div class="cal-cell cal-available">8</div>
                            <div class="cal-cell cal-available">9</div><div class="cal-cell cal-available">10</div><div class="cal-cell cal-available">11</div><div class="cal-cell cal-selected">12</div><div class="cal-cell cal-available">13</div><div class="cal-cell cal-available">14</div><div class="cal-cell cal-available">15</div>
                             <div class="cal-cell cal-available">16</div><div class="cal-cell cal-available">17</div><div class="cal-cell cal-available">18</div><div class="cal-cell cal-reserved">19</div><div class="cal-cell cal-reserved">20</div><div class="cal-cell cal-available">21</div><div class="cal-cell cal-available">22</div>
                             <div class="cal-cell cal-available">23</div><div class="cal-cell cal-available">24</div><div class="cal-cell cal-available">25</div><div class="cal-cell cal-available">26</div><div class="cal-cell cal-available">27</div><div class="cal-cell cal-available">28</div><div class="cal-cell cal-available">29</div>
                             <div class="cal-cell cal-available">30</div><div class="cal-cell cal-past text-gray-300">1</div><div class="cal-cell cal-past text-gray-300">2</div><div class="cal-cell cal-past text-gray-300">3</div><div class="cal-cell cal-past text-gray-300">4</div><div class="cal-cell cal-past text-gray-300">5</div><div class="cal-cell cal-past text-gray-300">6</div>
                        </div>

                        <div class="flex flex-wrap justify-center gap-4 mt-6 text-xs text-gray-600">
                            <div class="flex items-center"><div class="w-4 h-4 rounded-md bg-pgso-blue mr-2"></div> Selected Date</div>
                            <div class="flex items-center"><div class="w-4 h-4 rounded-md bg-gray-200 mr-2 flex justify-center items-center text-gray-400 text-[10px]"><i class="fa-solid fa-xmark"></i></div> Reserved</div>
                            <div class="flex items-center"><div class="w-4 h-4 rounded-md text-gray-300 mr-2 flex justify-center items-center text-[10px]"><i class="fa-solid fa-xmark"></i></div> Past Date</div>
                            <div class="flex items-center"><div class="w-4 h-4 rounded-md border border-gray-200 mr-2"></div> Available</div>
                        </div>
                     </div>
                </div>

                <h3 class="text-lg font-bold mb-4">Other Equipment</h3>
                <div class="overflow-x-auto mb-8">
                    <table class="min-w-full text-sm text-left text-gray-500" id="equipment-table">
                        <thead class="text-xs text-gray-700 uppercase border-b">
                            <tr>
                                <th scope="col" class="p-4">Select</th>
                                <th scope="col" class="py-3">Equipment Name</th>
                                <th scope="col" class="py-3">Unit</th>
                                <th scope="col" class="py-3">Price</th>
                                <th scope="col" class="py-3 w-24">Quantity</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <tr data-price="1500" data-unit="day">
                                <td class="p-4"><input type="checkbox" name="equipment" class="equipment-checkbox w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300 rounded"></td>
                                <td class="py-3 font-medium text-gray-900">Boxing Ring Paraphernalia</td>
                                <td class="py-3">per day</td>
                                <td class="py-3 text-gray-900">₱5,500</td>
                                <td class="py-3"><input type="number" min="0" value="0" class="equipment-quantity form-input w-full rounded p-1 text-center" disabled></td>
                            </tr>
                            <tr data-price="400" data-unit="hour">
                                <td class="p-4"><input type="checkbox" name="equipment" class="equipment-checkbox w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300 rounded"></td>
                                <td class="py-3 font-medium text-gray-900">Folding Tables</td>
                                <td class="py-3">per table, per day</td>
                                <td class="py-3 text-gray-900">₱100</td>
                                <td class="py-3"><input type="number" min="0" value="0" class="equipment-quantity form-input w-full rounded p-1 text-center" disabled></td>
                            </tr>
                            <tr data-price="7.5" data-unit="per_day_per_chair">
                                <td class="p-4"><input type="checkbox" name="equipment" class="equipment-checkbox w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300 rounded"></td>
                                <td class="py-3 font-medium text-gray-900">Monoblock Chairs</td>
                                <td class="py-3">per chair, per day</td>
                                <td class="py-3 text-gray-900">₱7.5</td>
                                <td class="py-3"><input type="number" min="0" value="0" class="equipment-quantity form-input w-full rounded p-1 text-center" disabled></td>
                            </tr>
                            <tr data-price="7.5" data-unit="per_day_per_chair">
                                <td class="p-4"><input type="checkbox" name="equipment" class="equipment-checkbox w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300 rounded"></td>
                                <td class="py-3 font-medium text-gray-900">Monoblock Tables</td>
                                <td class="py-3">per table, per day</td>
                                <td class="py-3 text-gray-900">₱20</td>
                                <td class="py-3"><input type="number" min="0" value="0" class="equipment-quantity form-input w-full rounded p-1 text-center" disabled></td>
                            </tr>
                            <tr data-price="7.5" data-unit="per_day_per_chair">
                                <td class="p-4"><input type="checkbox" name="equipment" class="equipment-checkbox w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300 rounded"></td>
                                <td class="py-3 font-medium text-gray-900">Parachute Tent</td>
                                <td class="py-3">per day</td>
                                <td class="py-3 text-gray-900">₱500</td>
                                <td class="py-3"><input type="number" min="0" value="0" class="equipment-quantity form-input w-full rounded p-1 text-center" disabled></td>
                            </tr>
                            <tr data-price="7.5" data-unit="per_day_per_chair">
                                <td class="p-4"><input type="checkbox" name="equipment" class="equipment-checkbox w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300 rounded"></td>
                                <td class="py-3 font-medium text-gray-900">Red Carpet</td>
                                <td class="py-3">per day</td>
                                <td class="py-3 text-gray-900">₱1,500</td>
                                <td class="py-3"><input type="number" min="0" value="0" class="equipment-quantity form-input w-full rounded p-1 text-center" disabled></td>
                            </tr>
                            <tr data-price="7.5" data-unit="per_day_per_chair">
                                <td class="p-4"><input type="checkbox" name="equipment" class="equipment-checkbox w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300 rounded"></td>
                                <td class="py-3 font-medium text-gray-900">Sound System: 2 microphones and 2 speakers</td>
                                <td class="py-3">per hour</td>
                                <td class="py-3 text-gray-900">₱200</td>
                                <td class="py-3"><input type="number" min="0" value="0" class="equipment-quantity form-input w-full rounded p-1 text-center" disabled></td>
                            </tr>
                        <tr data-price="7.5" data-unit="per_day_per_chair">
                                <td class="p-4"><input type="checkbox" name="equipment" class="equipment-checkbox w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300 rounded"></td>
                                <td class="py-3 font-medium text-gray-900">Microphones</td>
                                <td class="py-3">per hour</td>
                                <td class="py-3 text-gray-900">₱25</td>
                                <td class="py-3"><input type="number" min="0" value="0" class="equipment-quantity form-input w-full rounded p-1 text-center" disabled></td>
                            </tr>
                            <tr data-price="7.5" data-unit="per_day_per_chair">
                                <td class="p-4"><input type="checkbox" name="equipment" class="equipment-checkbox w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300 rounded"></td>
                                <td class="py-3 font-medium text-gray-900">Table Cloths</td>
                                <td class="py-3">per cloth, per day</td>
                                <td class="py-3 text-gray-900">₱70</td>
                                <td class="py-3"><input type="number" min="0" value="0" class="equipment-quantity form-input w-full rounded p-1 text-center" disabled></td>
                            </tr>
                            <tr data-price="7.5" data-unit="per_day_per_chair">
                                <td class="p-4"><input type="checkbox" name="equipment" class="equipment-checkbox w-4 h-4 text-pgso-blue bg-gray-100 border-gray-300 rounded"></td>
                                <td class="py-3 font-medium text-gray-900">Table Runners</td>
                                <td class="py-3">per cloth, per day</td>
                                <td class="py-3 text-gray-900">₱25</td>
                                <td class="py-3"><input type="number" min="0" value="0" class="equipment-quantity form-input w-full rounded p-1 text-center" disabled></td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="text-s text-gray-500 mt-2 text-center font-light">Inclusive of sound system and projector(per day)</p>
                </div>

                <div class="mb-8">
                    <label class="block text-sm font-bold mb-2">Notes / Remarks (Optional)</label>
                    <textarea class="form-input w-full rounded-md p-3 h-24 resize-none" placeholder="Any special requests or additional information..."></textarea>
                </div>

                <div class="bg-slate-100 rounded-lg p-6 mb-8">
                    <div class="flex justify-between text-sm mb-2 text-gray-700">
                        <span>Venue Base Price:</span>
                        <span id="base-price-display" class="font-medium">₱0</span>
                    </div>
                    <div class="flex justify-between text-sm mb-2 text-gray-700">
                        <span>Total Days Reserved:</span>
                        <span id="days-reserved-display" class="font-medium">0 days</span>
                    </div>
                     <div class="flex justify-between text-sm mb-2 text-gray-700">
                        <span>Total Equipment Cost:</span>
                        <span id="equipment-cost-display" class="font-medium">₱0</span>
                    </div>
                    <div class="flex justify-between text-sm mb-2 text-gray-700">
                        <span>Sub-Total (Venue x Days + Equip.):</span>
                        <span id="subtotal-display" class="font-medium">₱0</span>
                    </div>
                    <div class="flex justify-between text-sm mb-4 text-gray-700 border-b border-gray-300 pb-4">
                        <span>Security Deposit (Refundable):</span>
                        <span class="font-medium">₱3,000</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-xl font-bold text-gray-800">Estimated Total:</span>
                        <span id="estimated-total-display" class="text-3xl font-bold text-pgso-blue">₱3,000</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-4">Note: Final pricing may vary based on actual hours and equipment usage. Contact PGSO for detailed quotes.</p>
                </div>

                <button type="submit" class="w-full pgso-btn text-white font-bold py-4 rounded-lg text-lg transition shadow-md">
                    View Reservation Summary
                </button>

            </form>
        </div>
    </main>

    <footer class="text-center py-8 text-gray-400 text-sm">
        &copy; 2025 Provincial General Services Office. All rights reserved.
    </footer>

<script>
    // Constants for pricing
    const SECURITY_DEPOSIT = 3000;
    // Reserved dates (for demonstration) - Year-Month-Day
    const RESERVED_DATES = [
        '2025-11-19', 
        '2025-11-20',
        '2025-12-10' // Example in the next month
    ];

    // State variables
    let selectedDates = [];
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    // DOM Elements
    const calendarDaysEl = document.getElementById('calendar-days');
    const currentMonthYearEl = document.getElementById('current-month-year');
    const prevMonthBtn = document.getElementById('prev-month-btn');
    const nextMonthBtn = document.getElementById('next-month-btn');
    const selectedDaysCountEl = document.getElementById('selected-days-count');

    // Price Elements
    const venueSelect = document.getElementById('venue-select');
    const equipmentCheckboxes = document.querySelectorAll('.equipment-checkbox');
    const equipmentQuantities = document.querySelectorAll('.equipment-quantity');
    const basePriceDisplay = document.getElementById('base-price-display');
    const daysReservedDisplay = document.getElementById('days-reserved-display');
    const equipmentCostDisplay = document.getElementById('equipment-cost-display');
    const subtotalDisplay = document.getElementById('subtotal-display');
    const estimatedTotalDisplay = document.getElementById('estimated-total-display');
    const durationRadios = document.querySelectorAll('input[name="duration"]');

    /**
     * Helper function to format price as Philippine Peso (₱)
     * @param {number} price
     */
    const formatPrice = (price) => {
        return '₱' + price.toLocaleString('en-PH', { minimumFractionDigits: 0, maximumFractionDigits: 2 });
    }

    // --- Calendar Functionality ---

    /**
     * Checks if a given date is in the past.
     * @param {Date} date - The date to check.
     * @returns {boolean} - True if the date is in the past, false otherwise.
     */
    const isPastDate = (date) => {
        const today = new Date();
        // Set both dates to midnight to only compare day, month, and year
        today.setHours(0, 0, 0, 0);
        date.setHours(0, 0, 0, 0);
        return date < today;
    }

    /**
     * Renders the calendar days for the currentMonth and currentYear.
     */
    const renderCalendar = () => {
        calendarDaysEl.innerHTML = '';
        const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        const startingDay = firstDayOfMonth.getDay(); // 0 (Sun) to 6 (Sat)
        
        // Update month/year title
        currentMonthYearEl.textContent = firstDayOfMonth.toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'long' 
        });

        // 1. Render blank cells for preceding days
        for (let i = 0; i < startingDay; i++) {
            const prevMonthDay = new Date(currentYear, currentMonth, 0).getDate() - startingDay + i + 1;
            calendarDaysEl.innerHTML += `<div class="cal-cell cal-past">${prevMonthDay}</div>`;
        }

        // 2. Render actual days
        for (let day = 1; day <= daysInMonth; day++) {
            const date = new Date(currentYear, currentMonth, day);
            const dateString = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            
            let className = 'cal-available date-cell';
            let isClickable = true;

            if (isPastDate(date)) {
                className = 'cal-past';
                isClickable = false;
            } else if (RESERVED_DATES.includes(dateString)) {
                className = 'cal-reserved';
                isClickable = false;
            } else if (selectedDates.includes(dateString)) {
                className = 'cal-selected date-cell';
            } else {
                 className = 'cal-available date-cell';
            }

            const cell = document.createElement('div');
            cell.classList.add('cal-cell', ...className.split(' '));
            cell.textContent = day;
            cell.dataset.date = dateString;
            cell.dataset.clickable = isClickable;

            if (isClickable) {
                cell.addEventListener('click', toggleDateSelection);
            }

            calendarDaysEl.appendChild(cell);
        }
        
        // 3. Render next month's filler days (up to 42 total cells)
        const totalCells = startingDay + daysInMonth;
        const fillerDays = 42 - totalCells; // Maximum cells to prevent layout shift
        for (let i = 1; i <= fillerDays; i++) {
            calendarDaysEl.innerHTML += `<div class="cal-cell cal-past text-gray-300">${i}</div>`;
        }
    };

    /**
     * Toggles the selection state of a date cell.
     * @param {Event} event - The click event.
     */
    const toggleDateSelection = (event) => {
        const cell = event.currentTarget;
        const date = cell.dataset.date;

        if (cell.classList.contains('cal-selected')) {
            // Deselect
            cell.classList.remove('cal-selected');
            cell.classList.add('cal-available');
            selectedDates = selectedDates.filter(d => d !== date);
        } else if (cell.dataset.clickable === 'true') {
            // Select
            cell.classList.add('cal-selected');
            cell.classList.remove('cal-available');
            selectedDates.push(date);
        }

        selectedDaysCountEl.textContent = selectedDates.length;
        calculateTotal();
    };

    // Navigation buttons
    prevMonthBtn.addEventListener('click', () => {
        currentMonth--;
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        }
        renderCalendar();
    });

    nextMonthBtn.addEventListener('click', () => {
        currentMonth++;
        if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }
        renderCalendar();
    });

    // --- Price Calculation Functionality ---

    /**
     * Calculates the total cost of all selected elements (Venue, Days, Equipment).
     */
    const calculateTotal = () => {
        // 1. Get Venue Base Price
        const selectedVenueOption = venueSelect.options[venueSelect.selectedIndex];
        const venueBasePrice = parseFloat(selectedVenueOption.dataset.price) || 0;

        // 2. Get Number of Days
        const numberOfDays = selectedDates.length;
        daysReservedDisplay.textContent = `${numberOfDays} day${numberOfDays !== 1 ? 's' : ''}`;

        // 3. Calculate Base Cost (Venue x Days)
        let venueCost = venueBasePrice * numberOfDays;
        basePriceDisplay.textContent = formatPrice(venueBasePrice);

        // 4. Calculate Equipment Cost
        let equipmentCost = 0;
        equipmentCheckboxes.forEach((checkbox, index) => {
            const quantityInput = equipmentQuantities[index];
            const row = checkbox.closest('tr');
            const pricePerUnit = parseFloat(row.dataset.price);
            const unitType = row.dataset.unit;
            let quantity = parseInt(quantityInput.value) || 0;

            if (checkbox.checked) {
                // Determine if quantity is days, hours, or units per day
                let effectiveQuantity = quantity;
                if (unitType === 'day' || unitType === 'per_day_per_chair') {
                    // Cost is per day, so multiply by days reserved
                    effectiveQuantity = quantity * numberOfDays; 
                } else if (unitType === 'hour') {
                    // For hour-based items, we need a duration radio check (simplification)
                    const selectedDurationRadio = document.querySelector('input[name="duration"]:checked');
                    const durationHours = selectedDurationRadio ? parseInt(selectedDurationRadio.dataset.durationValue) : 1; 
                    effectiveQuantity = quantity * durationHours;
                }
                
                equipmentCost += pricePerUnit * effectiveQuantity;
            }
        });
        
        equipmentCostDisplay.textContent = formatPrice(equipmentCost);

        // 5. Calculate Subtotal and Total
        const subtotal = venueCost + equipmentCost;
        const estimatedTotal = subtotal + SECURITY_DEPOSIT;

        subtotalDisplay.textContent = formatPrice(subtotal);
        estimatedTotalDisplay.textContent = formatPrice(estimatedTotal);
    };

    // --- Event Listeners ---

    // Venue change listener
    venueSelect.addEventListener('change', calculateTotal);

    // Equipment checkbox and quantity listeners
    equipmentCheckboxes.forEach((checkbox, index) => {
        const quantityInput = equipmentQuantities[index];
        
        // Toggle quantity input on checkbox change
        checkbox.addEventListener('change', () => {
            quantityInput.disabled = !checkbox.checked;
            quantityInput.value = checkbox.checked ? 1 : 0; // Set to 1 if checked, 0 if unchecked
            calculateTotal();
        });

        // Recalculate on quantity change
        quantityInput.addEventListener('input', calculateTotal);
        quantityInput.addEventListener('change', calculateTotal);
    });

    // Duration radio listeners (affects hour-based equipment)
    durationRadios.forEach(radio => {
        radio.addEventListener('change', calculateTotal);
    });


    // Initial setup
    document.addEventListener('DOMContentLoaded', () => {
        renderCalendar();
        calculateTotal(); // Initial calculation
    });
</script>

</body>
</html>